<!DOCTYPE html>
<!-- Основной язык страницы - русский -->
<html lang="ru">
<head>
    <!-- Мета-теги для корректного отображения -->
    <meta charset="UTF-8"> <!-- Кодировка UTF-8 для поддержки кириллицы -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Адаптивность для мобильных -->
    <!-- Заголовок страницы (отображается во вкладке браузера) -->
    <title>Генератор Цитат</title>
    <!-- Стили CSS для оформления страницы -->
    <style>
        /* Основные стили для всей страницы */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Современный шрифт */
            text-align: center; /* Выравнивание по центру */
            padding: 50px; /* Отступы от краев */
            background: linear-gradient(135deg, #667aea 0%, #764ba2 100%); /* Фиолетовый градиентный фон */
            min-height: 100vh; /* Минимальная высота — весь экран */
            display: flex; /* Flexbox для центрирования */
            align-items: center; /* Вертикальное центрирование */
            justify-content: center; /* Горизонтальное центрирование */
        }
        /* Контейнер для основного содержимого */
        .container {
            background: white; /* Белый фон контейнера */
            padding: 50px; /* Внутренние отступы */
            border-radius: 20px; /* Закруглённые углы */
            box-shadow: 0 20px 40px rgba(0,0,0,0.2); /* Тень для объёма */
            max-width: 700px; /* Максимальная ширина */
            width: 90%; /* Ширина 90% от доступного пространства */
        }
        /* Заголовок страницы */
        h1 {
            color: #333; /* Тёмно-серый цвет */
            margin-bottom: 30px; /* Отступ снизу */
            font-size: 2.5em; /* Крупный размер шрифта */
        }
        /* Контейнер для цитаты */
        #quote-box {
            background: #f9f9f9; /* Светло-серый фон */
            padding: 40px; /* Внутренние отступы */
            border-radius: 15px; /* Закруглённые углы */
            margin: 40px 0; /* Отступы сверху и снизу */
            border-left: 5px solid #8a2bc2; /* Фиолетовая левая рамка */
        }
        /* Текст цитаты */
        #quote-text {
            font-size: 22px; /* Крупный шрифт */
            line-height: 1.8; /* Межстрочный интервал */
            color: #333; /* Тёмно-серый цвет */
            font-style: italic; /* Курсивное начертание */
            margin-bottom: 26px; /* Отступ снизу */
        }
        /* Автор цитаты */
        #quote-author {
            color: #8a2bc2; /* Фиолетовый цвет */
            font-weight: bold; /* Жирное начертание */
            font-size: 18px; /* Размер шрифта */
        }
        /* Стили для кнопки */
        button {
            background: linear-gradient(135deg, #8a2be2 0%, #9376db 100%); /* Фиолетовый градиент */
            color: white; /* Белый текст */
            border: none; /* Без рамки */
            padding: 18px 50px; /* Внутренние отступы */
            font-size: 20px; /* Размер шрифта */
            border-radius: 50px; /* Круглые углы (овальная кнопка) */
            cursor: pointer; /* Курсор-указатель при наведении */
            margin: 30px 0; /* Отступы сверху и снизу */
            font-weight: bold; /* Жирный текст */
            letter-spacing: 1px; /* Расстояние между буквами */
            transition: all 0.3s; /* Плавные анимации */
            box-shadow: 0 5px 15px rgba(138, 43, 226, 0.3); /* Тень кнопки */
        }
            /* Эффект при наведении на кнопку */
            button:hover {
                transform: translateY(-3px); /* Поднимаем кнопку на 3px */
                box-shadow: 0 8px 20px rgba(138, 43, 226, 0.4); /* Усиливаем тень */
                background: linear-gradient(135deg, #7a1bd2 0%, #8366c1 100%); /* Темный градиент */
            }
        /* Стили для индикатора загрузки */
        .loading {
            color: #8a2be2; /* Фиолетовый цвет */
            font-size: 18px; /* Размер шрифта */
            margin: 20px; /* Отступы */
        }
        /* Класс для скрытия элементов */
        .hidden {
            display: none; /* Скрыть элемент */
        }
        /* Стили для счётчика цитат */
        .counter {
            color: #666; /* Серый цвет */
            margin-top: 30px; /* Отступ сверху */
            font-size: 16px; /* Размер шрифта */
        }
            /* Число в счётчике */
            .counter span {
                color: #8a2be2; /* Фиолетовый цвет */
                font-weight: bold; /* Жирное начертание */
                font-size: 20px; /* Крупный размер */
            }
    </style>
</head>
<body>
    <!-- Основной контейнер -->
    <div class="container">
        <!-- Заголовок с декоративными символами -->
        <h1>Генератор Цитат</h1>

        <!-- Блок для отображения цитаты -->
        <div id="quote-box">
            <!-- Текст цитаты (будет заполняться JavaScript) -->
            <div id="quote-text">Нажмите фиолетовую кнопку</div>
            <!-- Автор цитаты (будет заполняться JavaScript) -->
            <div id="quote-author"></div>
        </div>

        <!-- Основная кнопка для получения новой цитаты -->
        <button id="get-quote-btn">Новая цитата</button>

        <!-- Индикатор загрузки (скрыт по умолчанию) -->
        <div id="loading" class="loading hidden">📞 Загрузка...</div>

        <!-- Блок со счётчиком цитат -->
        <div class="counter">
            | Всего цитат: <span id="quote-count">25</span>
        </div>
    </div>

    <!-- JavaScript код для работы приложения -->
    <script>
        // Получаем элементы DOM (объектной модели документа)
        const btn = document.getElementById('get-quote-btn'); // Кнопка
        const quoteText = document.getElementById('quote-text'); // Текст цитаты
        const quoteAuthor = document.getElementById('quote-author'); // Автор цитаты
        const loading = document.getElementById('loading'); // Индикатор загрузки

        /**
         * Основная функция для получения случайной цитаты
         * Асинхронная функция, так как работает с HTTP-запросами
         */
        async function getQuote() {
            try {
                // 1. Показать индикатор загрузки
                loading.classList.remove('hidden');
                // 2. Очистить предыдущую цитату
                quoteText.textContent = '';
                quoteAuthor.textContent = '';
                // 3. Отправить запрос к API бэкенда
                const response = await fetch('http://localhost:8000/random-quote');
                // 4. Получить цитату в формате JSON
                const quote = await response.json();
                // 5. Отобразить полученную цитату на странице
                quoteText.textContent = `"${quote.text}"`;
                quoteAuthor.textContent = `- ${quote.author}`;
            } catch (error) {
                // 6. Обработка ошибки (сеть, сервер, парсинг)
                quoteText.textContent = 'Ошибка загрузки';
                quoteAuthor.textContent = 'Проверьте подключение';
            } finally {
                // 7. Этот блок выполняется всегда (и при успехе, и при ошибке)
                // Скрываем индикатор загрузки
                loading.classList.add('hidden');
            }
        }

        // 8. Назначить обработчик события "клик" на кнопку
        btn.addEventListener('click', getQuote);
        // 9. Установить количество цитат при загрузке страницы
        document.getElementById('quote-count').textContent = '25';
        // 10. Автоматически загрузить первую цитату при открытии страницы
        window.onload = getQuote;
    </script>
</body>
</html>